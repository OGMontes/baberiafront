<section class="cita-form">
  <h2>Agenda tu cita</h2>

  <form #form="ngForm" (ngSubmit)="validarYEnviar(form)">
    <div class="form-group">
      <label for="nombre">Nombre completo</label>
      <input type="text" id="nombre" name="nombre" [(ngModel)]="cita.nombre_cliente" required />
    </div>

    <div class="form-group">
      <label for="telefono">Teléfono</label>
      <input
        type="tel"
        id="telefono"
        name="telefono"
        [(ngModel)]="cita.telefono"
        (keypress)="soloNumeros($event)"
        required
        pattern="[0-9]*"
        inputmode="numeric"
        maxlength="10"
        placeholder="Ej. 5551234567"
      />
    </div>

    <div class="form-group">
      <label for="servicio">Servicio</label>
      <select
        id="servicio"
        name="servicio"
        [(ngModel)]="cita.servicio_id"
        (change)="onServicioSeleccionado()"
        required>
        <option value="" disabled selected>Selecciona un servicio</option>
        <option *ngFor="let s of servicios" [value]="s.ServicioId">
          {{ s.Nombre }} – ${{ s.Precio }} MXN
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="barbero">Barbero</label>
      <select id="barbero" name="barbero" [(ngModel)]="cita.barbero_id" required>
        <option value="" disabled selected>Selecciona un barbero</option>
        <option *ngFor="let b of barberos" [value]="b.BarberoId">
          {{ b.Nombre }} – {{ b.Especialidad || 'General' }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="fecha">Fecha y hora</label>
      <input type="datetime-local" id="fecha" name="fecha_cita" [(ngModel)]="cita.fecha_cita" required />
    </div>

    <div class="form-group">
      <label for="comentarios">Comentarios</label>
      <textarea
        id="comentarios"
        name="comentarios"
        [(ngModel)]="cita.comentarios"
        rows="3"
        maxlength="200"
        placeholder="¿Algo que debamos saber? (máx. 200 caracteres)"
      ></textarea>
    </div>

    <button type="submit" class="btn-submit">Reservar cita</button>
  </form>
</section>
